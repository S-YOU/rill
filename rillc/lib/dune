(library
 (public_name     rillc)
 (libraries       base stdio stdint)
 (preprocess
  (pps ppx_sexp_conv)))

(ocamllex lexer)

(menhir
 (flags   --only-tokens)
 (modules tokens))

(menhir
 (merge_into syntax)
 (flags      (--external-tokens Tokens -v --explain))
 (modules    tokens syntax))

;(rule
; (targets c_flags.sexp c_library_flags.sexp)
; (deps    (:discover config/discover.exe))
; (action  (run %{discover} -ocamlc %{ocamlc})))
