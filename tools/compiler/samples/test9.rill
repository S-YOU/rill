def main(): int
{
    val a = ret_struct();
    f0( a );
    f1( a );
    f2( a );

    val b: mutable(TestClass) = ret_struct();
    g0( b );
    g1( b );
    g2( a );

    return 0;
}

def ret_struct(): TestClass
{
    val a = TestClass();
    return a;
}

def f0(val a: mutable(TestClass)): void
{
}

def f1(val a: const(TestClass)): void
{
}

def f2(val a: immutable(TestClass)): void
{
}

def g0(ref a: mutable(TestClass)): void
{
    a.a = 123;
    a.f();
}

def g1(ref a: const(TestClass)): void
{
    a.f();
}

def g2(ref a: immutable(TestClass)): void
{
    a.f();
}

class TestClass
{
    def ctor()
    {
        this.a = 10;
        p( 10 );
    }

    def f(): void
    {
        p( this.a );
    }

    val a: int;
}
